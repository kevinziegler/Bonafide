<!DOCTYPE html>
<html>
    <head>
        <% include partials/meta.ejs %>
    </head>

    <body>
        <% include partials/nav.ejs %>
        <div class="container">
            <h1><%= title %></h1>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Organizations</h3>
                </div>
                <table class="table table-striped">
                    <thead>
                        <th>Name</th>
                        <th>Location</th>
                        <th>Description</th>
                    </thead>
                    <% organizations.forEach(function(org, index) { %>
                        <tr>
                            <td><%= org.name %></td>
                            <td><%= org.state %>, <%= org.country %></td>
                            <td><%= org.description %></td>
                        </tr>
                    <% }); %>
                </table>
                
                <div class="panel-footer">
                    <button class="btn btn-primary" data-toggle="modal" data-target="#addOrg">
                        Add
                    </button>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Organizational Units</h3>
                </div>
                <table class="table table-striped">
                    <thead>
                        <th>Name</th>
                        <th>Active Certs</th>
                        <th>Description</th>
                    </thead>
                    <% organizational_units.forEach(function(ou, index) { %>
                        <tr>
                            <td><%= ou.name %></td>
                            <td>0</td>
                            <td><%= ou.description %></td>
                        </tr>
                    <% }); %>
                </table>
                <div class="panel-footer">
                    <button class="btn btn-primary" data-toggle="modal" data-target="#addOrgUnit">
                        Add
                    </button>
                </div>
            </div>

            <div class="modal fade" id="addOrg" tabindex=-1 role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">Add an Organization</h4>
                        </div>
                        <form class="form" action="/certificates/configure/organizations/add" method="POST">
                            <div class="modal-body">
                                <label for="name">Name:</label>
                                <input type="text" id="name" name="name" class="form-control" placeholder="Name"></input>
                                <label for="description">Description:</label>
                                <textarea class="form-control" id="description" name="description" placeholder="Description"></textarea>
                                <label for="country">Country Code:</label>
                                <input type="text" id="country" name="country" class="form-control" maxlength=2></input>
                                <label for="state">State/Province:</label>
                                <input type="text" id="state" name="state" class="form-control"></input>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-default">Add</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="addOrgUnit" tabindex=-1 role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">Add an Organizational Unit</h4>
                        </div>
                        <form class="form" action="/certificates/configure/units/add" method="POST">
                            <div class="modal-body">
                                <label for="name">Name:</label>
                                <input type="text" id="name" name="name" class="form-control" placeholder="Org. Name">
                                <label for="description">Description:</label>
                                <textarea id="description" name="description" class="form-control" placeholder="Description"></textarea>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-default">Add</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
        <% include partials/scripts.ejs %>
    </body>
</html>
        
